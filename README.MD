

<div align="center" xmlns="http://www.w3.org/1999/html">
<!-- logo -->
<p align="center">
  <img src="doc/mineru.png" width="300px" style="vertical-align:middle;">
</p> 
<!-- hot link --> 
<p align="center">
<a href="https://github.com/opendatalab/PDF-Extract-Kit">PDF-Extract-Kit: High-Quality PDF Extraction Toolkit</a>ğŸ”¥ğŸ”¥ğŸ”¥
</p>
</div>

## é¡¹ç›®ç®€ä»‹
MinerUæ˜¯ä¸€æ¬¾å¼€æºçš„é«˜è´¨é‡PDFè§£æå·¥å…·ï¼ŒåŸºäºæ·±åº¦å­¦ä¹ æŠ€æœ¯ï¼Œå¯è‡ªåŠ¨æå–PDFæ–‡æ¡£ä¸­çš„æ–‡å­—ã€è¡¨æ ¼ã€å›¾ç‰‡ã€å…¬å¼ç­‰å†…å®¹ï¼Œå¹¶æä¾›ä¸°å¯Œçš„åˆ†æã€ç»Ÿè®¡ã€æœç´¢ç­‰åŠŸèƒ½ã€‚
æœ¬é¡¹ç›®ä¸ºå…¶æä¾›ä¸€ä¸ªç®€åŒ–ç‰ˆæœ¬çš„WebUIï¼Œæ–¹ä¾¿ç”¨æˆ·ä¸Šä¼ PDFæ–‡ä»¶ï¼Œå¹¶å®æ—¶å±•ç¤ºæå–ç»“æœã€‚

![é¡µé¢æˆªå›¾](doc/preview.png)


## 1. ç¬¬ä¸€æ¬¡è¿è¡Œå‰çš„é…ç½®
åœ¨ä»“åº“æ ¹ç›®å½•å¯ä»¥è·å¾— [magic-pdf.template.json](doc/magic-pdf.template.json) é…ç½®æ¨¡ç‰ˆæ–‡ä»¶
> â—ï¸åŠ¡å¿…æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°†é…ç½®æ–‡ä»¶æ‹·è´åˆ°ã€ç”¨æˆ·ç›®å½•ã€‘ä¸‹ï¼Œå¦åˆ™ç¨‹åºå°†æ— æ³•è¿è¡Œ
>  
> windowsç”¨æˆ·ç›®å½•ä¸º "C:\Users\ç”¨æˆ·å"
```powershell
(New-Object System.Net.WebClient).DownloadFile('https://gitee.com/myhloli/MinerU/raw/master/magic-pdf.template.json', 'magic-pdf.template.json')
cp magic-pdf.template.json ~/magic-pdf.json
```

åœ¨ç”¨æˆ·ç›®å½•ä¸­æ‰¾åˆ°magic-pdf.jsonæ–‡ä»¶å¹¶é…ç½®"models-dir"ä¸º[5. ä¸‹è½½æ¨¡å‹](#5-ä¸‹è½½æ¨¡å‹)ä¸­ä¸‹è½½çš„æ¨¡å‹æƒé‡æ–‡ä»¶æ‰€åœ¨ç›®å½•
> â—ï¸åŠ¡å¿…æ­£ç¡®é…ç½®æ¨¡å‹æƒé‡æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„ã€ç»å¯¹è·¯å¾„ã€‘ï¼Œå¦åˆ™ä¼šå› ä¸ºæ‰¾ä¸åˆ°æ¨¡å‹æ–‡ä»¶è€Œå¯¼è‡´ç¨‹åºæ— æ³•è¿è¡Œ
> 
> windowsç³»ç»Ÿä¸­æ­¤è·¯å¾„åº”åŒ…å«ç›˜ç¬¦ï¼Œä¸”éœ€æŠŠè·¯å¾„ä¸­æ‰€æœ‰çš„`"\"`æ›¿æ¢ä¸º`"/"`,å¦åˆ™ä¼šå› ä¸ºè½¬ä¹‰åŸå› å¯¼è‡´jsonæ–‡ä»¶è¯­æ³•é”™è¯¯ã€‚
> 
> ä¾‹å¦‚ï¼šæ¨¡å‹æ”¾åœ¨Dç›˜æ ¹ç›®å½•çš„modelsç›®å½•ï¼Œåˆ™model-dirçš„å€¼åº”ä¸º"D:/models"
```json
{
  "models-dir": "/tmp/models"
}
```


## 2. æµ‹è¯•CUDAåŠ é€Ÿ
å¦‚æœæ‚¨çš„æ˜¾å¡æ˜¾å­˜å¤§äºç­‰äº8Gï¼Œå¯ä»¥è¿›è¡Œä»¥ä¸‹æµç¨‹ï¼Œæµ‹è¯•CUDAè§£æåŠ é€Ÿæ•ˆæœ

**1.è¦†ç›–å®‰è£…æ”¯æŒcudaçš„torchå’Œtorchvision**
```bash
pip install --force-reinstall torch==2.3.1 torchvision==0.18.1 --index-url https://download.pytorch.org/whl/cu118
```
> â—ï¸åŠ¡å¿…åœ¨å‘½ä»¤ä¸­æŒ‡å®šä»¥ä¸‹ç‰ˆæœ¬
> ```bash
> torch==2.3.1 torchvision==0.18.1 
> ```
> è¿™æ˜¯æˆ‘ä»¬æ”¯æŒçš„æœ€é«˜ç‰ˆæœ¬ï¼Œå¦‚æœä¸æŒ‡å®šç‰ˆæœ¬ä¼šè‡ªåŠ¨å®‰è£…æ›´é«˜ç‰ˆæœ¬å¯¼è‡´ç¨‹åºæ— æ³•è¿è¡Œ

**2.ä¿®æ”¹ã€ç”¨æˆ·ç›®å½•ã€‘ä¸­é…ç½®æ–‡ä»¶magic-pdf.jsonä¸­"device-mode"çš„å€¼**
```json
{
  "device-mode":"cuda"
}
```

> æç¤ºï¼šCUDAåŠ é€Ÿæ˜¯å¦ç”Ÿæ•ˆå¯ä»¥æ ¹æ®logä¸­è¾“å‡ºçš„å„ä¸ªé˜¶æ®µcostè€—æ—¶æ¥ç®€å•åˆ¤æ–­ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œ`layout detection cost` å’Œ `mfr time` åº”æé€Ÿ10å€ä»¥ä¸Šã€‚


## æ¡ˆä¾‹PDFå¯ä»¥é€‰æ‹© `examples/small_ocr.pdf`


## å¯åŠ¨é¡¹ç›®
```bash
pip install -r requirements.txt
python webui.py
```

> å¯åŠ¨æˆåŠŸåï¼Œæµè§ˆå™¨æ‰“å¼€ http://localhost:7860/ å³å¯è®¿é—®é¡¹ç›®ä¸»é¡µã€‚